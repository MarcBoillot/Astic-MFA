<mvc:View controllerName="wwl.controller.Master"
          xmlns:mvc="sap.ui.core.mvc"
          xmlns:f="sap.f"
          xmlns="sap.m"
          xmlns:l="sap.ui.table"
          xmlns:core="sap.ui.core"
          xmlns:t="sap.ui.layout.form">

    <f:DynamicPage>

        <f:header>
            <f:DynamicPageHeader pinnable="false">
                <FlexBox alignItems="Center" justifyContent="SpaceBetween">
                    <Title text="Template de base" titleStyle="H2" class="sapUiSmallMarginBegin"/>
                    <Image src="./img/seidor-logo1.png" height="42px"/>
                </FlexBox>
            </f:DynamicPageHeader>
        </f:header>

        <f:content>

            <VBox>
                <VBox class="sapUiSmallMargin">
                    <Button id="button" text="Open Menu" press="onPress" ariaHasPopup="Menu"/>
                </VBox>
                <l:Table
                        id="Table"
                        rows="{path:'itemsModel>/', parameters: {arrayNames:['ItemCode']}}"
                        selectionMode="MultiToggle"
                        enableSelectAll="false"
                        ariaLabelledBy="title">

                    <l:columns>
                        <l:Column>
                            <Label text="ItemName"/>
                            <l:template>
                                <Text text="{itemsModel>ItemName}" wrapping="false"/>
                            </l:template>
                        </l:Column>
                        <l:Column>
                            <Label text="ItemGroupCode"/>
                            <l:template>
                                <Text text="{itemsModel>ItemsGroupCode}" wrapping="false"/>
                            </l:template>
                        </l:Column>
                        <l:Column>
                            <Label text="ECOTaxe"/>
                            <l:template>
                                <Text text="{itemsModel>U_OB1ECOTAXE}" wrapping="false"/>
                            </l:template>
                        </l:Column>

                    </l:columns>
                </l:Table>

            <l:TreeTable
                         id="treeTable"
                         rows="{path:'ordersModel>/', parameters: {arrayNames:['DocumentLines']}}"
                         selectionMode="MultiToggle"
                         enableSelectAll="false"
                         visibleRowCount="{ordersModel.length}"
                         ariaLabelledBy="title">
                <l:extension>
                    <OverflowToolbar style="Clear">
                        <Title id="orders" text="TOP 5 Orders"/>
                        <ToolbarSpacer/>
                        <Button text="Collapse all" press="onCollapseAll"/>
                        <Button text="Collapse selection" press="onCollapseSelection"/>
                        <Button text="Expand first level" press="onExpandFirstLevel"/>
                        <Button text="Expand selection" press="onExpandSelection"/>
                    </OverflowToolbar>
                </l:extension>

<!--                <IconTabBar-->
<!--                        expanded="{itemsModel>/}"-->
<!--                        class="sapUiSmallMarginBottom sapUiResponsiveContentPadding">-->
<!--                    <items>-->
<!--                        <IconTabFilter-->
<!--                                key="info"-->
<!--                                text="Info">-->
<!--                            <f:SimpleForm-->
<!--                                    layout="ResponsiveGridLayout" >-->
<!--                                <f:title>-->
<!--                                    <core:Title text="A Form" />-->
<!--                                </f:title>-->
<!--                                <Label text="Label"/>-->
<!--                                <Text text="Value"/>-->
<!--                            </f:SimpleForm>-->
<!--                        </IconTabFilter>-->
<!--                        <IconTabFilter-->
<!--                                key="attachments"-->
<!--                                text="Attachments">-->
<!--                            <List headerText="A List" showSeparators="Inner" >-->
<!--                            </List>-->
<!--                        </IconTabFilter>-->
<!--                        <IconTabFilter-->
<!--                                key="notes"-->
<!--                                text="Notes">-->
<!--                            <FeedInput />-->
<!--                        </IconTabFilter>-->
<!--                    </items>-->
<!--                </IconTabBar>-->

                <l:columns>
                    <l:Column>
                        <Label text="DocNum"/>
                        <l:template>
                            <Text text="{ordersModel>DocNum}" wrapping="false" />
                        </l:template>
                    </l:Column>
                    <l:Column>
                        <Label text="Client"/>
                        <l:template>
                            <Text text="{ordersModel>CardName}" wrapping="false" />
                        </l:template>
                    </l:Column>
                    <l:Column>
                        <Label text="Date"/>
                        <l:template>
                            <Text text="{path : 'ordersModel>DocDate', formatter : '.Formatter.formatDate'}" class="italicDate" wrapping="false" />
                        </l:template>
                    </l:Column>
                    <l:Column>
                        <Label text="Details Orders"/>
                        <HBox>
                            <ToggleButton text="Details"
                                          enabled="true"
                                          pressed="true"
                                          ariaDescribedBy="acceptButtonDescription genericButtonDescription"
                                          press="onExpandFirstLevel" >
                                <layoutData>
                                    <FlexItemData growFactor="1" />
                                </layoutData>
                            </ToggleButton>
                        </HBox>
                        <l:template>
                            <Text text="{ordersModel>ItemDescription}  {ordersModel>BarCode}" wrapping="false" />
                        </l:template>
                        <!--a verifier sans -->
                    </l:Column>
                    <l:Column>
                        <Label text="Price"/>
                        <l:template>
                            <Text text="{ordersModel>PriceAfterVAT}" wrapping="false"/>
                        </l:template>
                    </l:Column>
                    <l:Column>
                        <Label text="> 2000"/>
                        <l:template>
                            <Text text="{= ${ordersModel>PriceAfterVAT} > 2000 ? 'OK' : ${ordersModel>PriceAfterVAT} < 100 ? 'NNNOK'  : 'NOK' }" wrapping="false"/>
                        </l:template>
                    </l:Column>
                    <l:Column>
                        <Label text="voir détails"/>
                        <l:template>
                            <Button text="voir détails" press="getDetails"/>
                        </l:template>
                    </l:Column>
                    <l:Column>
                        <Label text="Total"/>
                        <l:template>
                            <Text text="{totalPrice}" wrapping="false"/>
                        </l:template>
                    </l:Column>
                </l:columns>
            </l:TreeTable>
            </VBox>
        </f:content>
    </f:DynamicPage>
</mvc:View>