<mvc:View controllerName="wwl.controller.Master"
          xmlns:mvc="sap.ui.core.mvc"
          xmlns:f="sap.f"
          xmlns="sap.m"
          xmlns:l="sap.ui.table"
          xmlns:u="sap.ui.unified"
          xmlns:x="sap.ui.layout"
          xmlns:core="sap.ui.core"
          xmlns:t="sap.ui.layout.form">

    <f:DynamicPage>

        <f:header>
            <f:DynamicPageHeader pinnable="false">
                <FlexBox alignItems="Center" justifyContent="SpaceBetween">
                    <Title text="Template de base" titleStyle="H2" class="sapUiSmallMarginBegin"/>
                    <Image src="./img/seidor-logo1.png" height="42px"/>
                </FlexBox>
            </f:DynamicPageHeader>
        </f:header>

        <f:content>

            <VBox>
                <IconTabBar id="iconTabBar" class="sapUiResponsiveContentPadding">
                    <items>
                        <IconTabFilter text="Globale View with detail">
                            <l:TreeTable
                                    id="treeTable"
                                    rows="{path:'ordersModel>/', parameters: {arrayNames:['DocumentLines']}}"
                                    selectionMode="MultiToggle"
                                    enableSelectAll="false"
                                    visibleRowCount="{ordersModel.length}"
                                    ariaLabelledBy="title">
                                <l:extension>
                                    <OverflowToolbar style="Clear">
                                        <Title id="orders" text="TOP 5 Orders"/>
                                        <ToolbarSpacer/>
                                        <Button id="button" text="Open Menu" press="onPress" ariaHasPopup="Menu"/>
                                        <Button text="Collapse all" press="onCollapseAll"/>
                                        <Button text="Collapse selection" press="onCollapseSelection"/>
                                        <Button text="Expand first level" press="onExpandFirstLevel"/>
                                        <Button text="Expand selection" press="onExpandSelection"/>
                                        <Button text="OrdersTable" press="onOrdersView"/>
                                    </OverflowToolbar>
                                </l:extension>
                                <l:columns>
                                    <l:Column>
                                        <Label text="DocNum"/>
                                        <l:template>
                                            <Text text="{ordersModel>DocNum}" wrapping="false" />
                                        </l:template>
                                    </l:Column>
                                    <l:Column>
                                        <Label text="Client"/>
                                        <l:template>
                                            <Text text="{ordersModel>CardName}" wrapping="false" />
                                        </l:template>
                                    </l:Column>
                                    <l:Column>
                                        <Label text="Date"/>
                                        <l:template>
                                            <Text text="{path : 'ordersModel>DocDate', formatter : '.Formatter.formatDate'}" class="italicDate" wrapping="false" />
                                        </l:template>
                                    </l:Column>
                                    <l:Column>
                                        <Label text="Details Orders"/>
                                        <HBox>
                                            <ToggleButton text="Details"
                                                          enabled="true"
                                                          pressed="true"
                                                          ariaDescribedBy="acceptButtonDescription genericButtonDescription"
                                                          press="onExpandFirstLevel">
                                                <layoutData>
                                                    <FlexItemData growFactor="1" />
                                                </layoutData>
                                            </ToggleButton>
                                        </HBox>
                                        <l:template>
                                            <Text text="{ordersModel>ItemDescription}  {ordersModel>BarCode}" wrapping="false" />
                                        </l:template>
                                        <!--a verifier sans -->
                                    </l:Column>
                                    <l:Column>
                                        <Label text="Price"/>
                                        <l:template>
                                            <Text text="{ordersModel>PriceAfterVAT} {ordersModel>Currency}" wrapping="false"/>
                                        </l:template>
                                    </l:Column>
                                    <l:Column>
                                        <Label text="> 800 "/>
                                        <l:template>
                                            <Text text="{= ${ordersModel>PriceAfterVAT} > 800  ? 'Error' : 'Success' }" wrapping="false"/>
                                        </l:template>
                                    </l:Column>
                                    <l:Column>
                                        <Label text="voir détails"/>
                                        <l:template>
                                            <Button text="voir détails" press="onPress"/>
                                        </l:template>
                                    </l:Column>
                                    <l:Column>
                                        <Label text="Total"/>
                                        <l:template>
                                            <Text text="{totalPrice}" wrapping="false"/>
                                        </l:template>
                                    </l:Column>
                                </l:columns>
                            </l:TreeTable>
                        </IconTabFilter>

                        <IconTabFilter text="Orders view with crud">

                            <l:Table
                                    id="Table"
                                    rows="{path:'ordersModel>/', parameters: {arrayNames:['DocumentLines']}}"
                                    visibleRowCount="{ordersModel}.length"
                                    selectionMode="MultiToggle"
                                    enableSelectAll="false"
                                    ariaLabelledBy="title">
                                <l:extension>
                                    <OverflowToolbar style="Clear">
                                        <Button text="Create" press="onPost"/>
                                        <Button text="Read" press="onGet"/>
                                        <Button text="UpDate" press="onPatch"/>
                                        <Button text="Delete" press="onDelete"/>
                                        <Button text="OrdersTable" press="onOrdersView"/>
                                    </OverflowToolbar>
                                </l:extension>
                                <l:columns>
                                    <l:Column>
                                        <Label text="Orders"/>
                                        <l:template>
                                            <Text text="{ordersModel>DocNum}" wrapping="false"/>
                                        </l:template>
                                    </l:Column>
                                    <l:Column>
                                        <Label text="Name"/>
                                        <l:template>
                                            <Text text="{ordersModel>CardName}" wrapping="false"/>
                                        </l:template>
                                    </l:Column>
                                    <l:Column>
                                        <Label text="Date"/>
                                        <l:template>
                                            <Text text="{path : 'ordersModel>DocDate', formatter : '.Formatter.formatDate'}" class="italicDate" wrapping="false"/>
                                        </l:template>
                                    </l:Column>
                                </l:columns>
                            </l:Table>
                        </IconTabFilter>

                        <IconTabFilter text="Calendar">

                            <x:VerticalLayout>
                                <u:Calendar
                                        id="calendar"
                                        select="handleCalendarSelect" />
                                <Button
                                        press="handleSelectToday"
                                        text="Select Today" />
                                <x:HorizontalLayout>
                                    <Label
                                            text="Selected Date : "
                                            class="labelMarginLeft" />
                                    <Text
                                            id="selectedDate"
                                            text="No Date Selected"
                                            class="labelMarginLeft"/>
                                </x:HorizontalLayout>
                            </x:VerticalLayout>
                        </IconTabFilter>
                    </items>
                </IconTabBar>
            </VBox>
        </f:content>
    </f:DynamicPage>
</mvc:View>